webpackJsonp([1],[,,,,,,,,,,,,function(t,e,n){"use strict";var o=n(3),i=n(47),a=n(43),c=n.n(a);o.a.use(i.a),e.a=new i.a({routes:[{path:"/",name:"Paint",component:c.a}]})},function(t,e,n){n(26);var o=n(2)(n(15),n(44),null,null);t.exports=o.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),i=n(13),a=n.n(i),c=n(12);o.a.config.productionTip=!1,new o.a({el:"#app",router:c.a,template:"<App/>",components:{App:a.a}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"color-picker",data:function(){return{index:0,colors:["#247ba0","#70c1b3","#b2dbbf","#f3ffbd","#50514f","#ff1654","#f25f5c","#ffe066","#ffffff"],hidden:!0}},computed:{color:function(){return this.colors[this.index]}},methods:{select:function(t){this.index=parseInt(t.toElement.title),this.hidden=!0,console.log("select: "+this.color)}},watch:{hidden:function(t,e){}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(33),i=n.n(o),a=n(29),c=(n.n(a),n(35)),r=n.n(c),s=n(42),l=n.n(s);e.default={name:"paint",data:function(){return{imgSrc:"static/gezi1.1.png"}},mounted:function(){if(!CanvasRenderingContext2D.prototype.fillFlood)return void alert("CanvasRenderingContext2D.fillFlood() not supported");this.AVInit(),this.loadImage()},methods:{AVInit:function(){i.a.init({appId:"IjU4EYmuxCwdJcgI9gVamsSL-gzGzoHsz",appKey:"TiADKTyeuiBuAoeQTaKocPbq"})},loadImage:function(){var t=this,e=document.getElementById("canvas"),n=e.getContext("2d"),o=new Image;o.src=this.imgSrc,o.onload=function(){e.width=o.width,e.height=o.height,n.fillStyle="white",n.fillRect(0,0,e.width,e.height),n.drawImage(o,0,0,e.width,e.height),t.pinchZoomInit()}},pinchZoomInit:function(){var t=document.querySelector("#canvas");r()(t,{draggable:!0,maxScale:5})},click:function(t){var e=document.getElementById("canvas"),n=e.getContext("2d"),o=t.offsetX,i=t.offsetY;console.log("click: "+[o,i]);var a=n.getImageData(o,i,1,1).data;if(0===a[0]&&0===a[1]&&0===a[2])return void console.log("skip the line");n.fillStyle=this.$refs.picker.color,n.fillFlood(o,i,32)},next:function(){alert("开发中。。。")},submit:function(t){if(console.log(t),!this.phone)return void alert("请输入联系方式");var e=document.getElementById("canvas"),n=e.toDataURL("image/jpeg"),o={base64:n.split(",")[1]},a=new i.a.File("canvas.jpg",o);a.metaData("owner",this.phone);var c=t.toElement;c.disabled=!0,a.save({onprogress:function(t){"upload"!==t.direction&&console.log("progress: "+t.progress)}},{}).then(function(t){console.log(t.attributes),alert("上传成功！")},function(t){console.error(t),alert("上传失败！"),c.disabled=!1})}},components:{ColorPicker:l.a}}},,,,,,,,,function(t,e){},function(t,e){},function(t,e){},,,,,,,,,,,,,,function(t,e,n){n(28);var o=n(2)(n(16),n(46),"data-v-7056dc75",null);t.exports=o.exports},function(t,e,n){n(27);var o=n(2)(n(17),n(45),"data-v-591d5cfc",null);t.exports=o.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"paint"},[n("canvas",{attrs:{id:"canvas"},on:{click:t.click}}),t._v(" "),n("color-picker",{ref:"picker"}),t._v(" "),n("button",{attrs:{id:"done-btn"},on:{click:t.next}},[t._v("✅")])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"color-picker"},[n("div",{staticClass:"block-container",attrs:{hidden:t.hidden}},t._l(t.colors,function(e,o){return n("div",{staticClass:"block",class:{active:o===t.index},style:{background:e},attrs:{title:o},on:{click:t.select}})})),t._v(" "),n("button",{staticClass:"tool-btn",style:{background:t.color},attrs:{hidden:!t.hidden},on:{click:function(e){t.hidden=!t.hidden}}},[t._v("\n    ✏\n  ")])])},staticRenderFns:[]}}],[14]);
//# sourceMappingURL=app.9780c5a9ae5b47a2f780.js.map