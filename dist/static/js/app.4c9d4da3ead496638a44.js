webpackJsonp([1],[,,,,,,,,,,,,,,function(t,e,n){"use strict";var a=n(3),i=n(65),o=n(54),r=n.n(o),s=n(56),c=n.n(s),u=n(55),l=n.n(u),d=n(57),p=n.n(d),m=n(53),f=n.n(m);a.a.use(i.a),e.a=new i.a({routes:[{path:"/",redirect:"/main"},{path:"/main",name:"Main",component:r.a,meta:{title:"首页"}},{path:"/select",name:"Select",component:c.a,meta:{title:""}},{path:"/paint",name:"Paint",component:l.a,meta:{title:"填色"}},{path:"/submit",name:"Submit",component:p.a,meta:{title:"提交"}},{path:"/feedback",name:"Feedback",component:f.a,meta:{title:"反馈"}}]})},function(t,e,n){n(34);var a=n(0)(n(17),n(60),null,null);t.exports=a.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(15),o=n.n(i),r=n(14);a.a.config.productionTip=!1,new a.a({el:"#app",router:r.a,template:"<App/>",components:{App:o.a}}),r.a.afterEach(function(t){document.title=t.meta.title})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(11);n.n(a).a.init({appId:"IjU4EYmuxCwdJcgI9gVamsSL-gzGzoHsz",appKey:"TiADKTyeuiBuAoeQTaKocPbq"}),e.default={name:"app"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"color-picker",data:function(){return{index:0,colors:["#247ba0","#70c1b3","#b2dbbf","#f3ffbd","#50514f","#ff1654","#f25f5c","#ffe066","#ffffff"],hidden:!0}},computed:{color:function(){return this.colors[this.index]}},methods:{select:function(t){this.index=parseInt(t.toElement.title),this.hidden=!0,console.log("select: "+this.color)}},watch:{hidden:function(t,e){}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"feedback",data:function(){return{}},mounted:function(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"main",data:function(){return{list:[{name:"樱·猫咪",desc:"樱花树下橘猫清澈的眸子",color:"#EECA7D",img:"static/tiane03.png",imgs:["static/tiane03.png","static/tiane03.png","static/tiane03.png"]},{name:"荷·锦鲤",desc:"立夏三日下荷塘与鱼嬉戏",color:"#85AE51",img:"static/secret1.1.png",imgs:["static/secret1.1.png","static/secret1.1.png","static/secret1.1.png"]},{name:"葵·松鼠",desc:"黄昏向日葵看向松鼠尾巴",color:"#E87D5C",img:"static/secret2.1.png",imgs:["static/secret2.1.png","static/secret2.1.png","static/secret2.1.png"]},{name:"梅·天鹅",desc:"倒映天空黑天鹅细嗅红梅",color:"#3E4C55",img:"static/secret3.1.png",imgs:["static/secret3.1.png","static/secret3.1.png","static/secret3.1.png"]}]}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),i=(n.n(a),n(45)),o=n.n(i),r=n(52),s=n.n(r),c=n(10),u=n.n(c),l=n(43);n.n(l);e.default={name:"paint",data:function(){return{}},computed:{canvas:function(){return document.getElementById("canvas")},ctx:function(){return this.canvas.getContext("2d")}},beforeCreate:function(){this.$route.params.img||this.$router.replace("/")},mounted:function(){if(!CanvasRenderingContext2D.prototype.fillFlood)return void alert("CanvasRenderingContext2D.fillFlood() not supported");this.loadImage()},methods:{loadImage:function(){var t=this,e=new Image;e.src=this.$route.params.img,e.onload=function(){t.canvas.width=e.width,t.canvas.height=e.height,t.canvas.hidden=!1,t.ctx.drawImage(e,0,0,t.canvas.width,t.canvas.height),t.pinchZoomInit()}},pinchZoomInit:function(){o()(this.canvas,{draggable:!0,maxScale:5})},PanzoomInit:function(){u()("#canvas").panzoom(),u()("#canvas").panzoom("option",{increment:1,minScale:.2,maxScale:5,duration:500}),u()("#canvas").on("mousedown touchstart",function(t){t.stopImmediatePropagation()})},click:function(t){var e=t.offsetX,n=t.offsetY;console.log("click: "+[e,n]);var a=this.ctx.getImageData(e,n,1,1).data;if(0===a[0]&&0===a[1]&&0===a[2]&&255===a[3])return void console.log("skip the line");this.ctx.fillStyle=this.$refs.picker.color,this.ctx.fillFlood(e,n,32)},next:function(){var t=this.$route.params;t.img=this.canvas.toDataURL("image/png"),this.$router.push({name:"Submit",params:t})}},components:{ColorPicker:s.a}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"select",data:function(){return{}},mounted:function(){document.title=this.$route.params.name}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),i=n.n(a);e.default={name:"submit",data:function(){return{}},computed:{phone:function(){return document.getElementById("phone").value},author:function(){return""}},beforeCreate:function(){this.$route.params.img||this.$router.replace("/")},methods:{submit:function(){var t=this;if(0===this.phone.length)return void alert("请输入联系方式");var e=this.$route.params.img.replace(/^data:image\/(png|jpg);base64,/,""),n={base64:e},a=new i.a.File("canvas.png",n);a.metaData("author",this.author),a.metaData("phone",this.phone);var o=document.getElementById("submit");o.disabled=!0,a.save({onprogress:function(t){"upload"!==t.direction&&console.log("progress: "+t.progress)}},{}).then(function(e){console.log(e),alert("上传成功！"),t.$router.push({path:"feedback",query:{objectId:e.id}})},function(t){console.error(t),alert("上传失败！"),o.disabled=!1})},queryCounter:function(){new i.a.Query("_File").count().then(function(t){alert("count: "+t)},function(t){console.log(t)})}},watch:{}}},,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,,,,,,,,,,,,function(t,e,n){n(37);var a=n(0)(n(18),n(63),"data-v-7056dc75",null);t.exports=a.exports},function(t,e,n){n(35);var a=n(0)(n(19),n(61),"data-v-55c4d291",null);t.exports=a.exports},function(t,e,n){n(38);var a=n(0)(n(20),n(64),"data-v-e6016676",null);t.exports=a.exports},function(t,e,n){n(36);var a=n(0)(n(21),n(62),"data-v-591d5cfc",null);t.exports=a.exports},function(t,e,n){n(32);var a=n(0)(n(22),n(58),"data-v-0ae9b588",null);t.exports=a.exports},function(t,e,n){n(33);var a=n(0)(n(23),n(59),"data-v-1c585ab8",null);t.exports=a.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"select"},t._l(t.$route.params.imgs,function(e,a){return n("div",{key:a,staticClass:"item"},[n("div",{staticClass:"index",style:{background:t.$route.params.color}},[t._v(t._s(a+1))]),t._v(" "),n("router-link",{attrs:{to:{name:"Paint",params:{img:e,color:t.$route.params.color}}}},[n("img",{staticClass:"pic",style:{borderColor:t.$route.params.color},attrs:{src:e}})])],1)}))},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"submit"},[n("div",{staticClass:"title"},[t._v("您的佳作")]),t._v(" "),n("img",{staticClass:"pic",style:{borderColor:t.$route.params.color},attrs:{src:t.$route.params.img}}),t._v(" "),n("img",{attrs:{id:"tips",src:"static/submit_tips.svg"}}),t._v(" "),n("div",{attrs:{id:"tips2"}},[t._v("请留下您的联系方式，方便工作人员与您联系。")]),t._v(" "),n("input",{style:{borderColor:t.$route.params.color},attrs:{type:"number",id:"phone",placeholder:"手机号"}}),t._v(" "),n("button",{on:{click:t.submit}},[n("img",{attrs:{id:"submit",src:"static/submit.svg"}})])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"feedback"},[n("div",[t._v("您的马克杯正在孕育")]),t._v(" "),n("div",[t._v("它将成为第0位马克宝宝")]),t._v(" "),n("div",[t._v("请在接收到手机短信之后")]),t._v(" "),n("div",[t._v("前往月牙楼525认领哦~")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"paint"},[n("canvas",{attrs:{id:"canvas",hidden:""},on:{click:t.click}}),t._v(" "),n("color-picker",{ref:"picker"}),t._v(" "),n("button",{attrs:{id:"done-btn"},on:{click:t.next}},[t._v("✅")])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"color-picker"},[n("div",{staticClass:"block-container",attrs:{hidden:t.hidden}},t._l(t.colors,function(e,a){return n("div",{staticClass:"block",class:{active:a===t.index},style:{background:e},attrs:{title:a},on:{click:t.select}})})),t._v(" "),n("button",{staticClass:"tool-btn",style:{background:t.color},attrs:{hidden:!t.hidden},on:{click:function(e){t.hidden=!t.hidden}}},[t._v("\n    ✏\n  ")])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},t._l(t.list,function(e,a){return n("div",{key:a,staticClass:"item",style:{borderColor:e.color,color:e.color}},[n("div",{staticClass:"text"},[t._v(t._s(e.desc))]),t._v(" "),n("router-link",{attrs:{to:{name:"Select",params:e}}},[n("img",{staticClass:"pic",attrs:{src:e.img}})])],1)}))},staticRenderFns:[]}}],[16]);
//# sourceMappingURL=app.4c9d4da3ead496638a44.js.map