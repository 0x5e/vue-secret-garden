{"version":3,"sources":["webpack:///static/js/app.2d518e9f165d47692963.js","webpack:///./src/router/index.js","webpack:///./src/App.vue?fc6a","webpack:///./src/main.js","webpack:///App.vue","webpack:///Paint.vue","webpack:///./src/components/Paint.vue","webpack:///./src/App.vue?63f3","webpack:///./src/components/Paint.vue?f0e0"],"names":["webpackJsonp","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__components_Paint__","__WEBPACK_IMPORTED_MODULE_2__components_Paint___default","n","use","routes","path","name","component","a","exports","Component","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_1__App___default","__WEBPACK_IMPORTED_MODULE_2__router__","config","productionTip","el","router","template","components","App","__WEBPACK_IMPORTED_MODULE_0_leancloud_storage__","__WEBPACK_IMPORTED_MODULE_0_leancloud_storage___default","__WEBPACK_IMPORTED_MODULE_1_floodfill__","data","colors","msg","picked","options","phone","mounted","CanvasRenderingContext2D","prototype","fillFlood","alert","this","AVInit","loadImage","methods","init","appId","appKey","canvas","document","getElementById","ctx","getContext","img","Image","src","onload","drawImage","width","height","select","event","toElement","title","console","log","click","offsetX","offsetY","fillStyle","submit","url","toDataURL","base64","split","file","File","metaData","btn","disabled","save","onprogress","e","direction","progress","then","attributes","error","render","_vm","_h","$createElement","_c","_self","attrs","id","staticRenderFns","staticClass","_v","_s","cellpadding","_l","option","style","background","rowspan","valign","on","directives","rawName","expression","type","placeholder","domProps","input","$event","target","composing"],"mappings":"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","file":"static/js/app.2d518e9f165d47692963.js","sourcesContent":["webpackJsonp([1],[\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Paint__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Paint___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_Paint__);\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  routes: [{\n    path: '/',\n    name: 'Paint',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_Paint___default.a\n  }]\n}));\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(10)\n\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(6),\n  /* template */\n  __webpack_require__(18),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(3);\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__App___default.a }\n});\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'app'\n});\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_leancloud_storage__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_leancloud_storage___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_leancloud_storage__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_floodfill__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_floodfill___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_floodfill__);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'paint',\n  data: function data() {\n    var colors = ['#247ba0', '#70c1b3', '#b2dbbf', '#f3ffbd', '#ff1654'];\n\n    return {\n      msg: 'Secret Garden',\n      picked: colors[0],\n      options: colors,\n      phone: ''\n    };\n  },\n  mounted: function mounted() {\n    if (!CanvasRenderingContext2D.prototype.fillFlood) {\n      alert('CanvasRenderingContext2D.fillFlood() not supported');\n      return;\n    }\n\n    this.AVInit();\n    this.loadImage();\n  },\n\n\n  methods: {\n    AVInit: function AVInit() {\n      __WEBPACK_IMPORTED_MODULE_0_leancloud_storage___default.a.init({\n        appId: \"IjU4EYmuxCwdJcgI9gVamsSL-gzGzoHsz\",\n        appKey: \"TiADKTyeuiBuAoeQTaKocPbq\"\n      });\n    },\n    loadImage: function loadImage() {\n      var canvas = document.getElementById('canvas');\n      var ctx = canvas.getContext('2d');\n\n      var img = new Image();\n      img.src = 'static/bg.jpeg';\n      img.onload = function () {\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n      };\n    },\n    select: function select(event) {\n      this.picked = event.toElement.title;\n      console.log('select: ' + this.picked);\n    },\n    click: function click(event) {\n      var offsetX = event.offsetX,\n          offsetY = event.offsetY;\n\n      console.log('click: ' + [offsetX, offsetY]);\n\n      var canvas = document.getElementById('canvas');\n      var ctx = canvas.getContext('2d');\n\n      ctx.fillStyle = this.picked;\n      ctx.fillFlood(offsetX, offsetY, 32);\n    },\n    submit: function submit(event) {\n      console.log(event);\n      if (!this.phone) {\n        alert('请输入联系方式');\n        return;\n      }\n\n      var canvas = document.getElementById('canvas');\n      var url = canvas.toDataURL('image/jpeg');\n      var data = { base64: url.split(',')[1] };\n      var file = new __WEBPACK_IMPORTED_MODULE_0_leancloud_storage___default.a.File('canvas.jpg', data);\n      file.metaData('owner', this.phone);\n\n      var btn = event.toElement;\n      btn.disabled = true;\n      file.save({\n        onprogress: function onprogress(e) {\n          if (e.direction === 'upload') {\n            return;\n          }\n          console.log('progress: ' + e.progress);\n        }\n      }, {}).then(function (file) {\n        console.log(file.attributes);\n        alert('上传成功！');\n      }, function (error) {\n        console.error(error);\n        alert('上传失败！');\n        btn.disabled = false;\n      });\n    }\n  }\n\n});\n\n/***/ }),\n/* 8 */,\n/* 9 */,\n/* 10 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 12 */,\n/* 13 */,\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(11)\n\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(7),\n  /* template */\n  __webpack_require__(19),\n  /* scopeId */\n  \"data-v-591d5cfc\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('router-view')], 1)\n},staticRenderFns: []}\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"paint\"\n  }, [_c('h1', [_vm._v(_vm._s(_vm.msg))]), _vm._v(\" \"), _c('table', {\n    attrs: {\n      \"cellpadding\": \"20\"\n    }\n  }, _vm._l((_vm.options), function(option) {\n    return _c('td', {\n      style: ({\n        background: option\n      }),\n      attrs: {\n        \"rowspan\": \"5\",\n        \"valign\": \"top\",\n        \"title\": option\n      },\n      on: {\n        \"click\": _vm.select\n      }\n    })\n  })), _vm._v(\" \"), _c('span', [_c('a', [_vm._v(\"联系方式:\")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.phone),\n      expression: \"phone\"\n    }],\n    attrs: {\n      \"type\": \"phone\",\n      \"placeholder\": \"手机号/邮箱\"\n    },\n    domProps: {\n      \"value\": (_vm.phone)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.phone = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": _vm.submit\n    }\n  }, [_vm._v(\"上传\")])]), _vm._v(\" \"), _c('p'), _vm._v(\" \"), _c('canvas', {\n    attrs: {\n      \"id\": \"canvas\",\n      \"width\": \"800\",\n      \"height\": \"800\"\n    },\n    on: {\n      \"click\": _vm.click\n    }\n  })])\n},staticRenderFns: []}\n\n/***/ })\n],[5]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.2d518e9f165d47692963.js","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Paint from '@/components/Paint'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'Paint',\n      component: Paint\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","\n/* styles */\nrequire(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-4cb52ad8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4cb52ad8\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 4\n// module chunks = 1","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","<template>\n  <div id=\"app\">\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'app'\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?043b0a97","<template>\n  <div class=\"paint\">\n    <h1>{{ msg }}</h1>\n    <table cellpadding=\"20\">\n      <td rowspan=\"5\" valign=\"top\" v-for=\"option in options\" v-bind:style=\"{ background: option }\" v-bind:title=\"option\" v-on:click=\"select\">\n      </td>\n    </table>\n    <span>\n      <a>联系方式:</a>\n      <input type=\"phone\" v-model=\"phone\" placeholder=\"手机号/邮箱\">\n      <button v-on:click=\"submit\">上传</button>\n    </span>\n    <p/>\n    <canvas id=\"canvas\" width=\"800\" height=\"800\" v-on:click=\"click\"></canvas>\n  </div>\n</template>\n\n<script>\nimport AV from 'leancloud-storage'\nimport 'floodfill'\n\nexport default {\n  name: 'paint',\n  data () {\n    let colors = [\n      '#247ba0',\n      '#70c1b3',\n      '#b2dbbf',\n      '#f3ffbd',\n      '#ff1654'\n      // '#50514f',\n      // '#f25f5c',\n      // '#ffe066',\n      // '#247ba0',\n      // '#70c1b3',\n    ]\n\n    return {\n      msg: 'Secret Garden',\n      picked: colors[0],\n      options: colors,\n      phone: ''\n    }\n  },\n\n  mounted () {\n    if (!CanvasRenderingContext2D.prototype.fillFlood) {\n      alert('CanvasRenderingContext2D.fillFlood() not supported')\n      return\n    }\n\n    this.AVInit()\n    this.loadImage()\n  },\n\n  methods: {\n    AVInit () {\n      AV.init({\n        appId: process.env.LEANCLOUD_APPID,\n        appKey: process.env.LEANCLOUD_APPKEY\n      })\n    },\n\n    loadImage () {\n      let canvas = document.getElementById('canvas')\n      let ctx = canvas.getContext('2d')\n\n      let img = new Image()\n      img.src = 'static/bg.jpeg'\n      img.onload = () => {\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height)\n      }\n    },\n\n    select (event) {\n      this.picked = event.toElement.title\n      console.log('select: ' + this.picked)\n    },\n\n    click (event) {\n      let {offsetX, offsetY} = event\n      console.log('click: ' + [offsetX, offsetY])\n\n      let canvas = document.getElementById('canvas')\n      let ctx = canvas.getContext('2d')\n\n      ctx.fillStyle = this.picked\n      ctx.fillFlood(offsetX, offsetY, 32)\n    },\n\n    submit (event) {\n      console.log(event)\n      if (!this.phone) {\n        alert('请输入联系方式')\n        return\n      }\n\n      let canvas = document.getElementById('canvas')\n      let url = canvas.toDataURL('image/jpeg')\n      let data = {base64: url.split(',')[1]}\n      let file = new AV.File('canvas.jpg', data)\n      file.metaData('owner', this.phone)\n\n      let btn = event.toElement\n      btn.disabled = true\n      file.save({\n        onprogress: (e) => {\n          if (e.direction === 'upload') { return }\n          console.log('progress: ' + e.progress)\n        }\n      }, {}).then((file) => {\n        console.log(file.attributes)\n        alert('上传成功！')\n      }, (error) => {\n        console.error(error)\n        alert('上传失败！')\n        btn.disabled = false\n      })\n    }\n  }\n\n}\n\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n#canvas {\n  /*width: 80%;*/\n  /*height: 80%;*/\n},\n#paint {\n  /*width: 100%;*/\n  /*height: 100%;*/\n  /*background: #f0f0f0;*/\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Paint.vue?9a8172c8","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-591d5cfc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Paint.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Paint.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-591d5cfc\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Paint.vue\"),\n  /* scopeId */\n  \"data-v-591d5cfc\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Paint.vue\n// module id = 17\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('router-view')], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-4cb52ad8\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 18\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"paint\"\n  }, [_c('h1', [_vm._v(_vm._s(_vm.msg))]), _vm._v(\" \"), _c('table', {\n    attrs: {\n      \"cellpadding\": \"20\"\n    }\n  }, _vm._l((_vm.options), function(option) {\n    return _c('td', {\n      style: ({\n        background: option\n      }),\n      attrs: {\n        \"rowspan\": \"5\",\n        \"valign\": \"top\",\n        \"title\": option\n      },\n      on: {\n        \"click\": _vm.select\n      }\n    })\n  })), _vm._v(\" \"), _c('span', [_c('a', [_vm._v(\"联系方式:\")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.phone),\n      expression: \"phone\"\n    }],\n    attrs: {\n      \"type\": \"phone\",\n      \"placeholder\": \"手机号/邮箱\"\n    },\n    domProps: {\n      \"value\": (_vm.phone)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.phone = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": _vm.submit\n    }\n  }, [_vm._v(\"上传\")])]), _vm._v(\" \"), _c('p'), _vm._v(\" \"), _c('canvas', {\n    attrs: {\n      \"id\": \"canvas\",\n      \"width\": \"800\",\n      \"height\": \"800\"\n    },\n    on: {\n      \"click\": _vm.click\n    }\n  })])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-591d5cfc\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Paint.vue\n// module id = 19\n// module chunks = 1"],"sourceRoot":""}