webpackJsonp([1],[,,,,,,,,,,,,,function(t,e,n){"use strict";var a=n(3),i=n(55),s=n(48),o=n.n(s),c=n(47),r=n.n(c),u=n(49),l=n.n(u);a.a.use(i.a),e.a=new i.a({routes:[{path:"/",name:"Select",component:o.a},{path:"/paint",name:"Paint",component:r.a},{path:"/submit",name:"Submit",component:l.a}]})},function(t,e,n){n(31);var a=n(1)(n(16),n(52),null,null);t.exports=a.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(14),s=n.n(i),o=n(13);a.a.config.productionTip=!1,new a.a({el:"#app",router:o.a,template:"<App/>",components:{App:s.a}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(10);n.n(a).a.init({appId:"IjU4EYmuxCwdJcgI9gVamsSL-gzGzoHsz",appKey:"TiADKTyeuiBuAoeQTaKocPbq"}),e.default={name:"app"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"color-picker",data:function(){return{index:0,colors:["#247ba0","#70c1b3","#b2dbbf","#f3ffbd","#50514f","#ff1654","#f25f5c","#ffe066","#ffffff"],hidden:!0}},computed:{color:function(){return this.colors[this.index]}},methods:{select:function(t){this.index=parseInt(t.toElement.title),this.hidden=!0,console.log("select: "+this.color)}},watch:{hidden:function(t,e){}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(34),i=(n.n(a),n(39)),s=n.n(i),o=n(46),c=n.n(o);e.default={name:"paint",data:function(){return{}},computed:{canvas:function(){return document.getElementById("canvas")},ctx:function(){return this.canvas.getContext("2d")}},mounted:function(){if(!CanvasRenderingContext2D.prototype.fillFlood)return void alert("CanvasRenderingContext2D.fillFlood() not supported");this.loadImage()},methods:{loadImage:function(){var t=this,e=new Image;e.src=this.$route.params.img,e.onload=function(){t.canvas.width=e.width,t.canvas.height=e.height,t.ctx.drawImage(e,0,0,t.canvas.width,t.canvas.height),t.pinchZoomInit()}},pinchZoomInit:function(){s()(this.canvas,{draggable:!0,maxScale:5})},click:function(t){var e=t.offsetX,n=t.offsetY;console.log("click: "+[e,n]);var a=this.ctx.getImageData(e,n,1,1).data;if(0===a[0]&&0===a[1]&&0===a[2]&&255===a[3])return void console.log("skip the line");this.ctx.fillStyle=this.$refs.picker.color,this.ctx.fillFlood(e,n,32)},next:function(){var t=this.$route.params;t.img=this.canvas.toDataURL("image/png"),this.$router.push({name:"Submit",params:t})}},components:{ColorPicker:c.a}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"select",data:function(){return{list:[{name:"猫·睡意",img:"static/secret1.1.png",text:"愿你化作春日里的一只乳猫，徘徊，徜徉，追逐飞虫，品味阳光。享受手心的温暖，获得内心的宁和。"},{name:"猫·嬉戏",img:"static/secret2.1.png",text:"愿你化作春日里的一只乳猫，徘徊，徜徉，追逐飞虫，品味阳光。享受手心的温暖，获得内心的宁和。"},{name:"鲤·争食",img:"static/secret3.1.png",text:"愿你化作春日里的一只乳猫，徘徊，徜徉，追逐飞虫，品味阳光。享受手心的温暖，获得内心的宁和。"}]}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(10),i=n.n(a);e.default={name:"submit",data:function(){return{}},computed:{msg:function(){return document.getElementById("msg").value},author:function(){return""}},methods:{submit:function(){var t=this.$route.params.img.replace(/^data:image\/(png|jpg);base64,/,""),e={base64:t},n=new i.a.File("canvas.png",e);n.metaData("author",this.author),n.metaData("msg",this.msg);var a=document.getElementById("submit");a.disabled=!0,n.save({onprogress:function(t){"upload"!==t.direction&&console.log("progress: "+t.progress)}},{}).then(function(t){console.log(t.attributes),alert("上传成功！")},function(t){console.error(t),alert("上传失败！"),a.disabled=!1})},queryCounter:function(){new i.a.Query("_File").count().then(function(t){alert("count: "+t)},function(t){console.log(t)})}},watch:{}}},,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,,,,,,,,,,,function(t,e,n){n(33);var a=n(1)(n(17),n(54),"data-v-7056dc75",null);t.exports=a.exports},function(t,e,n){n(32);var a=n(1)(n(18),n(53),"data-v-591d5cfc",null);t.exports=a.exports},function(t,e,n){n(29);var a=n(1)(n(19),n(50),"data-v-0ae9b588",null);t.exports=a.exports},function(t,e,n){n(30);var a=n(1)(n(20),n(51),"data-v-1c585ab8",null);t.exports=a.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"select"},t._l(t.list,function(e,a){return n("router-link",{key:a,staticClass:"list",attrs:{to:{name:"Paint",params:e}}},[n("img",{staticClass:"pic",attrs:{src:e.img}}),t._v(" "),n("span",{staticClass:"name"},[t._v(t._s(e.name))])])}))},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"submit"},[n("img",{staticClass:"pic",attrs:{src:t.$route.params.img}}),t._v(" "),n("div",{staticClass:"name"},[t._v("杯中语")]),t._v(" "),n("div",{staticClass:"text"},[t._v(t._s(t.$route.params.text))]),t._v(" "),n("textarea",{attrs:{id:"msg",placeholder:"我要留言"}}),t._v(" "),n("button",{attrs:{id:"submit"},on:{click:t.submit}},[t._v("提交")])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"paint"},[n("canvas",{attrs:{id:"canvas"},on:{click:t.click}}),t._v(" "),n("color-picker",{ref:"picker"}),t._v(" "),n("button",{attrs:{id:"done-btn"},on:{click:t.next}},[t._v("✅")])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"color-picker"},[n("div",{staticClass:"block-container",attrs:{hidden:t.hidden}},t._l(t.colors,function(e,a){return n("div",{staticClass:"block",class:{active:a===t.index},style:{background:e},attrs:{title:a},on:{click:t.select}})})),t._v(" "),n("button",{staticClass:"tool-btn",style:{background:t.color},attrs:{hidden:!t.hidden},on:{click:function(e){t.hidden=!t.hidden}}},[t._v("\n    ✏\n  ")])])},staticRenderFns:[]}}],[15]);
//# sourceMappingURL=app.65f618dd04a9c7bd57ad.js.map